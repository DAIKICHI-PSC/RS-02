# RS-02
Easy Robot Maker


IT IS SOFTWARE THAT CAN CONTROL INSPECTION MACHINES AND SIMPLE ROBOTS WITH CNC-LIKE PROGRAMS. INTERRUPTS AND ASYNCHRONOUS PROCESSING ARE NOT SUPPORTED.

I COULDN'T SPEND ANY MORE TIME DEVELOPING IT, SO I MADE IT PUBLIC. IN FACT, FIVE ROBOTS OPERATE 24 HOURS A DAY. I THINK IT'S GOOD TO USE MULTI-TAP TO CUT NOISE.

PYTHON 3.7.1 OR HIGHER AND PYSIDE2 ARE REQUIRED. MAYBE THERE ARE OTHER LIBRARIES YOU NEED. INSTALL IF NECESSARY.

24V I/O IS POSSIBLE WITH 24V ARDUINO COMPATIBLE DEVICES (SUCH AS COMFILE'S FA-DUINO24) (5V ARDUINO IS ALSO AVAILABLE, BUT THERE IS A POSSIBILITY OF MALFUNCTION DUE TO NOISE). DEPENDING ON THE MODEL, CHANGE THE PORT START NUMBER AND NUMBER OF PORTS OF THE FIRMWARE "PLC-01.INO". DEPENDING ON THE INPUT VALUE, YOU CAN BRANCH PROGRAM PROCESSING.

COMPATIBLE WITH SUS'S XA SERIES OF SINGLE-AXIS ROBOTS (TEACHING ONLY). COMPATIBLE WITH IAI'S RCP SERIES OF SINGLE-AXIS ROBOTS (POSITIONING ONLY). ASYNCHRONOUS OPERATION OF MULTIPLE AXES IS POSSIBLE.

COMPATIBLE WITH MEASURING INSTRUMENTS THAT CAN RECEIVE READINGS WITH RS232C. BY SPECIFYING THE TOLERANCE RANGE, YOU CAN BRANCH THE PROGRAM PROCESSING BY DETERMINING OK AND NG.

EACH DEVICE CAN BE CONNECTED TO UP TO 100 UNITS EACH.

RUN "RS02_MAIN.PY". TO MAKE THE PROGRAM WORK, READ THE PROGRAM (TEXT FILE) IN "EDIT" MODE AND PRESS THE "RUN" BUTTON IN "AUTO" MODE TO RUN IT. FOR MORE INFORMATION ABOUT THE INSTRUCTION, SEE RS-02 USERS MANUAL.DOCX.


検査機や簡易的なロボットを、ＣＮＣライクなプログラムで制御出来るソフトウェアです。
割り込みや非同期処理には未対応となります。

これ以上開発に時間が割けなくなったので、公開しました。
実際に5台のロボットで24時間稼働させております。
ノイズをカットするマルチタップを使用するのが吉かと思います。

Python 3.7.1以上とPySide2が必要となります。
もしかしたら、他に必要なライブラリがあるかもしれません。
必要に応じてインストールして下さい。


24V対応のArduino互換機(Comfile社のFA-DUINO24等)で24Vの入出力が可能（5VのArduinoも使用可能ですが、ノイズによる誤動作の可能性があります）。
機種により、ファームウェア「PLC-01.ino」のポート開始番号とポート数を変更してください。
入力値により、プログラム処理の分岐が出来ます。

SUS社の単軸ロボットXAシリーズに対応（ティーチングのみ）。
IAI社の単軸ロボットRCPシリーズに対応（位置指定のみ）。
複数軸の非同期動作が可能です。

RS232Cで測定値が受け取れる測定器に対応。
公差範囲を指定して、OKとNGの判定により、プログラム処理の分岐が出来ます。

各機器は各100台まで接続可能となってます。


「RS02_MAIN.py」を実行して下さい。
プログラムを動作させるには、「EDIT」モードでプログラム(テキストファイル)を読み込み、「AUTO」モードで「RUN」ボタンを押して実行します。
命令の詳細は「RS-02 USERS MANUAL.docx」を参照してください。
・#
#_=_
変数値設定命令
#_の_は変数番号を指定する。
=_の_は数値、又は定義済の変数を指定する。
変数を定義すると同時に値を設定する。
例：#1=1
例：#1=#2

#_+_
加算命令
#_の_は変数番号を指定する。
+_の_は数値、又は定義済の変数を指定する。
変数に、指定した数値、又は変数の値を加算する。
例：#1+1
例：#1+#2

#_-_
減算命令
#_の_は変数番号を指定する。
-_の_は数値、又は定義済の変数を指定する。
変数に、指定した数値、又は変数の値を減算する。
例：#1-1
例：#1-#2

#_=_:#_=_
#_=_:#_+_
#_=_:#_-_
#_=_:P_
条件分岐命令
#_の_は変数番号を指定する。
-_の_は数値、又は定義済の変数を指定する。
:#_の_は変数番号を指定する。
=_の_は数値、又は定義済の変数を指定する。
+_の_は数値、又は定義済の変数を指定する。
-_の_は数値、又は定義済の変数を指定する。
P_の_はジャンプ先を指定する。
:以前の=を挟んだ右辺と左辺の値が同値の場合、:以降を実行する。
例：#1=1:#1=0
例:#1=#2:#1=#3
例：#1=1:#1+1
例:#1=#2:#1+#3
例：#1=1:#1-1
例:#1=#2:#1-#3
例:#1=1:P1



・A
A_
XA軸選択命令
_はSET A_=COM_で指定した機器番号で1～100を指定する。
K_命令で動作させるXA軸を選択する。
例：A1



B_
RCP軸選択命令
_はSET A_=COM_で指定した機器番号で1～100を指定する。
K_命令で動作させるRCP軸を選択する。
例：A1



・C
C
RCP原点復帰命令
数値無しで記述する。
B_命令で選択済のRCP軸の原点復帰を行う。
例：C



・D
未使用



・Ｅ
E_ S_ A_
RCP軸移動命令
E_の_はRCP軸の絶対位置を指定する（0.01mm単位、0mm～RCP軸の最大ストローク）。
S_の_は速度を指定する（0.01mm/s単位、0.01mm/s～RCP軸の許容速度）。
A_の_は加減速度を指定する（0.01G単位、0.01G～3.0G）。
B_命令で選択済のRCP軸の移動を行う。
例：E100 S500 A0.5
例：E0.1 S0.5 A0.5



・Ｆ
F
プログラム終了命令
プログラムを強制停止する。



・G
G4 U_
一時停止用命令
_は少数点以下の値も指定可能。
指定秒プログラムを停止する。
例：G4 U0.2
0.2秒間プログラムを停止



・H
H1
カウンター加算命令
H1を実行するとカウンターに1が加算され、SET H=_で指定した値に達すると、プログラムを終了する。

H0
カウンターリセット命令
カウンター数を0にする。



・I
I_ P_
測定実行命令
I_の_はSET I_=COM_で指定した機器番号で1～100を指定する。
P_の_は測定値が公差範囲外の場合のジャンプ先（N_）の数値を指定する。
測定器から測定値を取得し、測定値が公差の範囲外の場合は指定先にジャンプする。
測定値が公差の範囲内の場合は、プログラムの次の行に進む。
例：I1 P1

I_ R
初期値設定命令（測定器をセンサーとして使用）
I_の_はSET I_=COM_で指定した機器番号で1～100を指定する。
測定器の現在の値を取得し、初期値として設定する。I_ C_を実行した際に、測定器の値が初期値から変化していなければ、指定先にジャンプする。
例：I1 R

I_ C_
測定実行命令（測定器をセンサーとして使用）
I_の_はSET I_=COM_で指定した機器番号で1～100を指定する。
C_の_は測定値が公差範囲外の場合のジャンプ先（N_）の数値を指定する。
測定器の値がI_ Rで設定した初期値から変化していなければ、指定先にジャンプする。
測定器の値が初期値から変化していた場合は、プログラムの次の行に進む。
例：I1 R



・J
J_
RCP軸位置決精度
J_の_はRCP軸位置決精度値を指定する（0.01mm単位、0.01mm～9999.99mm）。
RCP軸の位置決め精度を指定する（初期値は0.1mm）。
許容誤差を小さくし過ぎると、加速度や重量の関係で、アラームとなる。
例：J0.01



・K
K_
XA軸移動命令
K_の_はティーチングソフトで登録した移動番号（0～63）を指定する。
ティーチングソフトで移動番号0に100を設定後、K0を実行すると、XA軸は原点から100mmの位置に移動する。
例：K0



・L
L_
PLC選択命令
_はSET L_=COM_で指定した機器番号で1～100を指定する。
動作させるPLCを選択する。
例：L1



・M
M4 T_
タイムアウト値設定命令
T_の_は、機器の動作完了を待つ時間を設定する（秒単位）。
指定した時間内に各機器の動作が完了しない場合はプログラムを停止する。
例：M4 T5

M20
ワンサイクルストップ命令
画面上のONECYCLEにチェックを入れた状態でM20が読み込まれると、プログラムが一時停止される。

M21
エラーディテクトON命令
動作させた機器の動作が完了するまで、プログラムの実行行で待つモード。

M22
エラーディテクトOFF命令
動作させた機器の動作が完了するのを待たず、プログラムを継続して実行するモード。各機器を同時に動作させる事が可能となる。

M99
エンドオブプログラム命令
プログラムの実行行を先頭に戻す命令。

M99 P_
ジャンプ命令
P_の_はジャンプ先（N_）の数値を指定する。
プログラムの実行行を指定した行（N_）に変更する。

M200
待ち合わせ命令
エラーディテクトOFF時、全ての機器の動作が完了するまで、現在の行で待機する。



・N
N_
ジャンプ先指定命令
N_の_は任意の数値を指定する。
各種命令からのジャンプ先を指定。
例：N1



・O
未使用



・P
未使用



・Q
未使用



・R
R_ P_
PLC入力値確認命令
R_の_は16桁で0か1を指定する。
P_の_はP_の_はジャンプ先（N_）の数値を指定する。
指定値とＰＬＣ入力値が同じ場合、プログラムの実行行を指定した行（N_）に変更する。
M22モードでは動作不可。
例：R1000 0000 0000 0000 P4
例：R1000000000000000 P4

R_
PLC入力値確認命令
R_の_は16桁で0か1を指定する。
指定値とＰＬＣ入力値が同じになるまでプログラムを停止する。
例：R1000 0000 0000 0000 P4
例：R1000000000000000 P4


R_=_ P_
PLC特定入力値確認命令
R_の_は0～15を指定する。
=_の_は0か1を指定する。
P_の_はP_の_はジャンプ先（N_）の数値を指定する。
PLCの入力値（0000000000000000）の一番左を0として、指定位置の値が指定値の場合、プログラムの実行行を指定した行（N_）に変更する。
M22モードでは動作不可。
例：R0=0 P1

R_=_
PLC特定入力値確認命令
R_の_は0～15を指定する。
=_の_は0か1を指定する。
PLCの入力値（0000000000000000）の一番左を0として、指定位置の値が指定値になるまでプログラムを停止する。
例：R0=0 P1

R_ P_
PLC入力値確認命令
R_の_は16桁で0、1、*、#_を指定する。*は指定ビットの入力値が0、１を問わない場合に使用する。#_は変数を指定する。
P_の_はP_の_はジャンプ先（N_）の数値を指定する。
M22モードでは動作不可。
指定値とＰＬＣ入力値が同じ場合、プログラムの実行行を指定した行（N_）に変更する。
例：R#1,*,1,1, 0,0,0,0, 0,0,0,0, 0,0,0,0 P4
例：R#1,*,1,0,0,0,0,0,0,0,0,0,0,0,0,0 P4

R_
PLC入力値確認命令
R_の_は16桁で0、1、*、#_を指定する。*は指定ビットの入力値が0、１を問わない場合に使用する。#_は変数を指定する。
指定値とＰＬＣ入力値が同じになるまでプログラムを停止する。
例：R#1,*,1,1, 0,0,0,0, 0,0,0,0, 0,0,0,0 P4
例：R#1,*,1,0,0,0,0,0,0,0,0,0,0,0,0,0 P4



・S
SET A_=COM_
XA軸用シリアルポート設定命令
SET_の_は1～100の任意の数値を指定する。
=COM_の_は対応するシリアルポートの番号を指定する。
A_命令に対応するシリアルポートを設定する。最大で１００台まで接続可能。
例：SET A1=COM1

SET B_=COM_
RCP軸用シリアルポート設定命令
SET_の_は1～100の任意の数値を指定する。
=COM_の_は対応するシリアルポートの番号を指定する。
B_命令に対応するシリアルポートを設定する。最大で１００台まで接続可能。
例：SET B1=COM1

SET H=_
カウンター数設定命令
=_の_は任意の数値を指定する。
H命令でプログラムを停止する迄のカウンターの回数を設定する。 
例：SET H=10

SET I_= COM_,_,_,_,_,_,_,_,_,_
測定器用シリアルポート設定命令
SET_の_は1～100の任意の数値を指定する。
=COM_の_は対応するシリアルポートの番号を指定する。
以降は、ボーレート,バイトサイズ,パリティー,ストップビット,測定値取得命令,測定値取得開始位置,測定値取得終了位置,公差上限,公差加減
ボーレート　通信速度で、測定器の設定に従う。
バイトサイズ　5、6、7、8のいずれかで、測定器の設定に従う。
パリティー　E、Nのいずれかで、測定器の設定に従う。
ストップビット　1、1.5、2の何れかで、測定器の設定に従う。
測定値取得命令　測定器から測定値を取得する命令で、測定器の設定に従う。
測定値取得開始位置　受信した文字列内の測定値の開始位置。
測定値取得終了位置　受信した文字列内の測定値の終了位置。
公差上限　任意の公差上限値
公差加減　任意の公差下限値
I_命令に対応するシリアルポートを設定する。最大で１００台まで接続可能。
例：SET I1=COM4,4800,7,E,2,?,0,7,0,-0.007

SET L_=COM_
PLC軸用シリアルポート設定命令
SET_の_は1～100の任意の数値を指定する。
=COM_の_は対応するシリアルポートの番号を指定する。
L_命令に対応するシリアルポートを設定する。最大で１００台まで接続可能。
例：SET L1=COM1



・T
T_
手動タイマー命令
T_の_は数値を指定する（秒）。
指定した時間内にT0が実行されないと、タイムアウトとしてプログラムを停止する。
例：T100
例：T0



・U
未使用



・V
未使用



・W
W_
PLC接点開閉命令
W_の_は8桁で0か1を指定する。
PLCの接点のオンオフを行う。0が指定された接点は全てオフとなり、1が指定された接点は全てオンとなる。
例：W1000 0000
例：W10000000

W_=_
PLC特定接点開閉命令
W_の_は0～7を指定する。
=_の_は0か1を指定する。
指定したPLCの接点のオンオフを行う。0が指定されるとオフとなり、1が指定されるとオンとなる。
例：W0=0



・X
未使用



・Y
未使用



・Z
未使用



・プログラムサンプル
SET I1=COM4,4800,7,E,2,?,0,7,0,-0.007
SET L1=COM3
SET A1=COM5
SET H=10
L1
A1
K0
G4 U0.2
K1

N1
W0000 0000
M20

N2
R1000 0000 0000 0000 P4
W0010 0000
G4 U0.2
I1 R
W0011 0000
G4 U0.2
R1=1 P3
W0011 1100
G4 U0.3
W0010 1100
G4 U0.2
W0000 0000
G4 U0.2
H1
M99 P2

N3
K2
I1 C5
K1
W1010 0000
G4 U1.0
W0010 0000
G4 U0.5
W0110 0000
G4 U0.2
W0010 0000
G4 U1.0
W0000 0000
G4 U0.2
H1
M99 P2

N4
H0
W1010 0000
G4 U0.3
W1011 0000
G4 U0.1
K2

N5

W1010 0000
G4 U0.1
K3
I1 P6
K4
K5
I1 P6
K6
K7
I1 P6

W0011 0000
G4 U0.1
K1
W0111 1000
G4 U0.3
W0010 1000
G4 U0.2
W0010 0000
M99 P1

N6
W0011 0100
G4 U0.1
K1
W0111 1100
G4 U0.3
W0010 1100
G4 U0.2
W0010 0000
M99 P1
